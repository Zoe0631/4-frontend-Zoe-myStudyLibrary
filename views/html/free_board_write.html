<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>myStudyLibrary 자유게시판</title>
    <style>
      @import url("/views/css/reset.css");
      @import url("/views/css/common.css");
      @import url("/views/css/free_board.css");
      @import url("/views/css/free_board_write.css");
      /* 글씨체 */
      @import url("https://fonts.googleapis.com/css2?family=Grape+Nuts&family=Gugi&family=Lobster&family=Noto+Sans+KR:wght@300&family=Noto+Serif+KR&family=Poor+Story&display=swap");
    </style>
  </head>
  <body>
    <!-- gmb -->
    <header>
      <script src="/views/js/header.js"></script>
    </header>
    <article class="freeBoard">
      <p class="freeBoard__title">📋 자유게시판 - 글작성</p>
      <form action="" class="container__write" method="post" onsubmit="return false">
        <input
          type="text"
          placeholder="글 제목"
          class="container__write--title"
          name="postTitle"
          required
          minlength="2"
          maxlength="50"
          oninput="checkTitleLength(this)"
        />
        <span class="container__title--length">(0/50)</span>
        <textarea
          placeholder="글 내용"
          class="container__write--content"
          name="postContent"
          required
          minlength="2"
          maxlength="5000"
          oninput="checkContentLength(this)"
        ></textarea>
        <span class="container__content--length">(0/5000)</span>
        <input type="text" placeholder="# 태그(최대 5개)" class="container__write--tag" name="tags" />
        <input type="submit" value="확인" class="container__search--submit" />
      </form>
    </article>

    <!-- footer -->
    <footer class="footer__serviceInfo">
      <script src="/views/js/footer.js"></script>
    </footer>

    <!-- sweetAlert2 -->
    <script src="/views/js/sweetalert2.js" type="text/javascript"></script>
    <script src="/views/js/custom.js" type="text/javascript"></script>
    <!--fetch-->
    <script src="/customs/constant.js" type="text/javascript"></script>
    <script src="/models/board.js" type="text/javascript"></script>
    <script>
      // 제목 글자수 체크
      async function checkTitleLength(titleElement) {
        const length = titleElement.value.length;
        document.getElementsByClassName("container__title--length")[0].innerHTML = `(${length}/50)`;
        if (length > 50) {
          const substring = titleElement.value.substring(0, 49);
          console.log(substring);
          titleElement.value = substring;
          const length = titleElement.value.length;
          document.getElementsByClassName("container__title--length")[0].innerHTML = `(${length}/50)`;
          await sweetAlert(WARNING,"글자수 초과","제목은 50자 까지만 입력가능합니다.");
        }
      }
// 내용 글자수 체크
      async function checkContentLength(contentElement) {
        const length = contentElement.value.length;
        document.getElementsByClassName("container__content--length")[0].innerHTML = `(${length}/5000)`;
        if (length >= 5000) {
          const substring = contentElement.value.substring(0, 4998);
          contentElement.value = substring;
          const length = contentElement.value.length;
          document.getElementsByClassName("container__content--length")[0].innerHTML = `(${length}/5000)`;
          await sweetAlert(WARNING,"글자수 초과","내용은 5000자 까지만 입력가능합니다.");
        }
      }
    </script>
  </body>
</html>
